# Use Go 1.24.4 official image
FROM golang:1.24.4-alpine

# Set working directory
WORKDIR /app

# Install git and necessary tools
RUN apk add --no-cache git bash

# Copy go mod files and download deps first (layered build optimization)
COPY go.mod go.sum ./
RUN go mod download

# Copy entire source
COPY . .

# Build the CLI binary
RUN go build -o omnidict main.go

# Set the default command to run the CLI binary
CMD ["./omnidict"]
# Expose port 8080 for the CLI (if needed)
# EXPOSE 8080